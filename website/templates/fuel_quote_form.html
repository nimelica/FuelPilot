{% extends 'base.html' %}

{% block content %}
<div class="shadow p-3 mb-5 bg-body rounded">
        <form method="POST">
            {{ form.hidden_tag() }}
            <div class="form-group">
                <label for="num_of_gallons_requested">Number of Gallons Requested:</label>
                <input type="number" class="form-control" name="num_of_gallons_requested" id="num_of_gallons_requested">
            </div>
            <div class="form-group">
                <button type="button" class="btn btn-primary" id="get_quote_button" disabled>Get Quote</button>
            </div>
            <div class="form-group">
                <label for="delivery_address">{{ form.delivery_address.label }}</label>
                {{ form.delivery_address(class="form-control", size=32) }}
            </div>
            <div class="form-group">
                <label for="delivery_date">{{ form.delivery_date.label }}</label>
                {{ form.delivery_date(class="form-control", size=32) }}
            </div>
            <div class="form-group">
                <label for="suggested_price">{{ form.suggested_price.label }}</label>
                {{ form.suggested_price(class="form-control", size=32) }}
            </div>
            <div class="form-group">
                <label for="total_amount_due">{{ form.total_amount_due.label }}</label>
                {{ form.total_amount_due(class="form-control", size=32) }}
            </div>            
            <input type="submit" value="Submit" class="btn btn-secondary">
        </form>
</div>

<script>
    const num_of_gallons_requested = document.querySelector('#num_of_gallons_requested');
    const get_quote_button = document.querySelector('#get_quote_button');

    num_of_gallons_requested.addEventListener('change', (event) => {
        if (event.target.value) {
            get_quote_button.disabled = false;
        } else {
            get_quote_button.disabled = true;
        }
    });

    get_quote_button.addEventListener('click', () => {
        const num_of_gallons_requested = document.querySelector('#num_of_gallons_requested').value;
        const delivery_address = document.querySelector('#delivery_address').value;
        const delivery_date = document.querySelector('#delivery_date').value;

        // Compute suggested_price and total_amount_due
        const suggested_price = 1.50 + (0.02 - 0.01 + 0.02 + 0.10) * 1.50;
        const total_amount_due = num